<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jumping Star with Sound</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }

        /* Star CSS */
        .star {
            position: relative;
            display: block;
            width: 0;
            height: 0;
            border-right: 50px solid transparent;
            border-bottom: 35px solid orange;
            border-left: 50px solid transparent;
            transform: rotate(35deg);
        }

        .star:before {
            content: '';
            position: absolute;
            top: -25px;
            left: -32px;
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-bottom: 40px solid orange;
            transform: rotate(-35deg);
        }

        .star:after {
            content: '';
            position: absolute;
            top: 3px;
            left: -55px;
            width: 0;
            height: 0;
            border-right: 50px solid transparent;
            border-bottom: 35px solid orange;
            border-left: 50px solid transparent;
            transform: rotate(-70deg);
        }

        /* Container for scaling */
        .star-container {
            display: flex;
            justify-content: center;
            align-items: center;
            transform: scale(1); /* Default scale */
            transition: transform 0.1s ease; /* Quick transition for jumping effect */
        }

        .column
        {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
    </style>
</head>
<body>
    <div class="column">
        <div>
            <img src="Logo-Cabezal-desktop-3.jpg" alt="">
    
        </div>
        <!-- Star element -->
    
        <h1>Toca el tambor y mira el sonido!</h1>
                <div class="star-container">
            <div class="star"></div>
        </div>
    
    </div>
  
    <script>
        const starContainer = document.querySelector('.star-container');
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        function scaleStarWithVolume(volume) {
            if (volume > 0.6) {  // Threshold to detect "spike" (adjust this value as needed)
                const scaleFactor = 1 + volume * 3;  // Make the star "jump" when volume spikes
                starContainer.style.transform = `scale(${scaleFactor})`;
            } else {
                starContainer.style.transform = `scale(1)`;  // Reset to original size
            }
        }

        // Access the microphone
        navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {
            const microphone = audioContext.createMediaStreamSource(stream);
            const analyser = audioContext.createAnalyser();

            analyser.minDecibels = -70;
            analyser.maxDecibels = -10;

            microphone.connect(analyser);

            const dataArray = new Uint8Array(analyser.frequencyBinCount);

            function update() {

                
                analyser.getByteFrequencyData(dataArray);

                // Calculate the average volume
                const volume = Math.max(...dataArray) / 255;

                // Scale the star based on volume spikes
                scaleStarWithVolume(volume);

                requestAnimationFrame(update);
            }

            update();
        }).catch(error => {
            console.error('Error accessing the microphone:', error);
        });
    </script>
</body>
</html>
